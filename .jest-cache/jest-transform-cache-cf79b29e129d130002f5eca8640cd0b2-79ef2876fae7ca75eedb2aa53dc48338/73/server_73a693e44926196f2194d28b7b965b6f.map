{"version":3,"sources":["/Users/matt/Sites/MarketEdge/platform-wrapper/frontend/src/test-utils/mocks/server.ts"],"sourcesContent":["/**\n * Mock Service Worker (MSW) Server Setup\n * \n * Provides API mocking for testing multi-tenant scenarios.\n * Handles authentication, tenant-specific data, and rate limiting responses.\n */\n\nimport { setupServer } from 'msw/node'\nimport { http, HttpResponse } from 'msw'\nimport { generateMockApiResponse, mockDataGenerators } from '../index'\n\n// Base API URL for mocking\nconst API_BASE_URL = 'http://localhost:8000/api/v1'\n\n// Mock handlers for different API endpoints\nconst handlers = [\n  // Authentication endpoints\n  http.post(`${API_BASE_URL}/auth/login`, async ({ request }) => {\n    const body = await request.json()\n    const { email, password } = body as any\n    \n    if (email === 'test@example.com' && password === 'password123') {\n      return HttpResponse.json({\n        access_token: 'mock-jwt-token',\n        token_type: 'bearer',\n        expires_in: 3600,\n        user: {\n          id: 'test-user-456',\n          email: 'test@example.com',\n          name: 'Test User',\n          role: 'user',\n          organization_id: 'test-tenant-123',\n          is_active: true,\n        },\n        organization: {\n          id: 'test-tenant-123',\n          name: 'Test Organization',\n          industry: 'b2b',\n          subscription: 'premium',\n          features: ['market-edge', 'analytics', 'reporting'],\n        },\n      }, { status: 200 })\n    }\n    \n    return HttpResponse.json(\n      { detail: 'Invalid credentials' },\n      { status: 401 }\n    )\n  }),\n\n  http.post(`${API_BASE_URL}/auth/refresh`, () => {\n    return HttpResponse.json({\n      access_token: 'new-mock-jwt-token',\n      token_type: 'bearer',\n      expires_in: 3600,\n    }, { status: 200 })\n  }),\n\n  http.post(`${API_BASE_URL}/auth/logout`, () => {\n    return HttpResponse.json(\n      { message: 'Logged out successfully' },\n      { status: 200 }\n    )\n  }),\n\n  // User profile endpoints\n  http.get(`${API_BASE_URL}/users/me`, ({ request }) => {\n    const authHeader = request.headers.get('authorization')\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return HttpResponse.json({ detail: 'Not authenticated' }, { status: 401 })\n    }\n    \n    return HttpResponse.json({\n      id: 'test-user-456',\n      email: 'test@example.com',\n      name: 'Test User',\n      role: 'user',\n      organization_id: 'test-tenant-123',\n      permissions: ['read:data', 'write:data'],\n      is_active: true,\n      created_at: '2024-01-01T00:00:00Z',\n      updated_at: '2024-01-01T00:00:00Z',\n    })\n  }),\n\n  // Organization endpoints\n  http.get(`${API_BASE_URL}/organizations/me`, () => {\n    return HttpResponse.json({\n      id: 'test-tenant-123',\n      name: 'Test Organization',\n      industry: 'b2b',\n      subscription: 'premium',\n      features: ['market-edge', 'analytics', 'reporting'],\n      limits: {\n        users: 100,\n        api_calls: 10000,\n        storage: 1000,\n      },\n      settings: {\n        timezone: 'UTC',\n        currency: 'USD',\n        date_format: 'YYYY-MM-DD',\n      },\n    })\n  }),\n\n  // Market Edge API endpoints\n  http.get(`${API_BASE_URL}/market-edge/competitors`, ({ request }) => {\n    const url = new URL(request.url)\n    const industry = url.searchParams.get('industry') || 'b2b'\n    \n    // Simulate different data based on industry\n    let mockData\n    switch (industry) {\n      case 'cinema':\n        mockData = generateMockApiResponse('cinema', 'venue', 3)\n        break\n      case 'hotel':\n        mockData = generateMockApiResponse('hotel', 'property', 3)\n        break\n      case 'gym':\n        mockData = generateMockApiResponse('gym', 'facility', 3)\n        break\n      case 'retail':\n        mockData = generateMockApiResponse('retail', 'store', 3)\n        break\n      default:\n        mockData = generateMockApiResponse('b2b', 'client', 3)\n    }\n\n    return HttpResponse.json({\n      data: mockData,\n      meta: {\n        total: mockData.length,\n        page: 1,\n        per_page: 10,\n        industry,\n      },\n    })\n  }),\n\n  http.get(`${API_BASE_URL}/market-edge/analytics`, ({ request }) => {\n    const url = new URL(request.url)\n    const timeframe = url.searchParams.get('timeframe') || '7d'\n    \n    return HttpResponse.json({\n      metrics: {\n        revenue: 125000,\n        growth: 12.5,\n        market_share: 15.2,\n        competitor_count: 8,\n      },\n      trends: {\n        daily_revenue: [\n          { date: '2024-01-08', value: 18000 },\n          { date: '2024-01-09', value: 19200 },\n          { date: '2024-01-10', value: 17800 },\n          { date: '2024-01-11', value: 20100 },\n          { date: '2024-01-12', value: 21500 },\n          { date: '2024-01-13', value: 19800 },\n          { date: '2024-01-14', value: 22000 },\n        ],\n      },\n      timeframe,\n    })\n  }),\n\n  // Feature flags endpoints\n  http.get(`${API_BASE_URL}/features`, () => {\n    return HttpResponse.json({\n      flags: {\n        'market-edge': { enabled: true, rollout: 100 },\n        'advanced-analytics': { enabled: true, rollout: 75 },\n        'real-time-data': { enabled: false, rollout: 25 },\n        'mobile-app': { enabled: true, rollout: 100 },\n      },\n    })\n  }),\n\n  // Admin endpoints (require admin role)\n  http.get(`${API_BASE_URL}/admin/users`, ({ request }) => {\n    const authHeader = request.headers.get('authorization')\n    \n    // Simulate role-based access control\n    if (!authHeader || authHeader === 'Bearer non-admin-token') {\n      return HttpResponse.json({ detail: 'Insufficient permissions' }, { status: 403 })\n    }\n    \n    return HttpResponse.json({\n      users: [\n        {\n          id: 'user-1',\n          email: 'admin@example.com',\n          name: 'Admin User',\n          role: 'admin',\n          is_active: true,\n        },\n        {\n          id: 'user-2',\n          email: 'manager@example.com',\n          name: 'Manager User',\n          role: 'manager',\n          is_active: true,\n        },\n        {\n          id: 'user-3',\n          email: 'user@example.com',\n          name: 'Regular User',\n          role: 'user',\n          is_active: true,\n        },\n      ],\n      meta: { total: 3, page: 1, per_page: 10 },\n    })\n  }),\n\n  // Rate limiting simulation\n  http.get(`${API_BASE_URL}/test/rate-limit`, () => {\n    // Simulate rate limit headers\n    return HttpResponse.json(\n      { message: 'Rate limit test successful' },\n      {\n        headers: {\n          'X-RateLimit-Limit': '100',\n          'X-RateLimit-Remaining': '95',\n          'X-RateLimit-Reset': String(Date.now() + 3600000),\n        }\n      }\n    )\n  }),\n\n  http.get(`${API_BASE_URL}/test/rate-limit-exceeded`, () => {\n    return HttpResponse.json(\n      {\n        error: 'Rate limit exceeded',\n        message: 'Too many requests. Limit: 100 per window',\n        retry_after: 60,\n      },\n      {\n        status: 429,\n        headers: {\n          'X-RateLimit-Limit': '100',\n          'X-RateLimit-Remaining': '0',\n          'X-RateLimit-Reset': String(Date.now() + 3600000),\n          'Retry-After': '60',\n        }\n      }\n    )\n  }),\n\n  // Error simulation endpoints for testing error handling\n  http.get(`${API_BASE_URL}/test/server-error`, () => {\n    return HttpResponse.json({ detail: 'Internal server error' }, { status: 500 })\n  }),\n\n  http.get(`${API_BASE_URL}/test/network-error`, () => {\n    return HttpResponse.error()\n  }),\n\n  http.get(`${API_BASE_URL}/test/timeout`, async () => {\n    // Simulate a slow response\n    await new Promise(resolve => setTimeout(resolve, 10000)) // 10 second delay\n    return HttpResponse.json({ message: 'Slow response' })\n  }),\n\n  // Fallback handler for unmatched requests\n  http.get('*', ({ request }) => {\n    console.warn(`Unhandled GET request to ${request.url}`)\n    return HttpResponse.json(\n      { detail: `Endpoint not found: ${new URL(request.url).pathname}` },\n      { status: 404 }\n    )\n  }),\n\n  http.post('*', ({ request }) => {\n    console.warn(`Unhandled POST request to ${request.url}`)\n    return HttpResponse.json(\n      { detail: `Endpoint not found: ${new URL(request.url).pathname}` },\n      { status: 404 }\n    )\n  }),\n]\n\n// Create and export the server\nexport const server = setupServer(...handlers)\n\n// Helper functions for test-specific mocking\nexport const mockApiEndpoint = {\n  // Mock successful responses\n  success: (endpoint: string, data: any, status = 200) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json(data, { status })\n      })\n    )\n  },\n\n  // Mock error responses\n  error: (endpoint: string, status = 500, message = 'Server error') => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({ detail: message }, { status })\n      })\n    )\n  },\n\n  // Mock rate limit responses\n  rateLimited: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json(\n          {\n            error: 'Rate limit exceeded',\n            message: 'Too many requests',\n            retry_after: 60,\n          },\n          {\n            status: 429,\n            headers: {\n              'X-RateLimit-Limit': '100',\n              'X-RateLimit-Remaining': '0',\n              'Retry-After': '60',\n            }\n          }\n        )\n      })\n    )\n  },\n\n  // Mock network errors\n  networkError: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.error()\n      })\n    )\n  },\n\n  // Mock slow responses\n  slow: (endpoint: string, delay = 5000) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, async () => {\n        await new Promise(resolve => setTimeout(resolve, delay))\n        return HttpResponse.json({ message: 'Delayed response' })\n      })\n    )\n  },\n}\n\n// Industry-specific mock helpers\nexport const mockIndustryData = {\n  cinema: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({\n          venues: generateMockApiResponse('cinema', 'venue', 5),\n          movies: generateMockApiResponse('cinema', 'movie', 10),\n          bookings: generateMockApiResponse('cinema', 'booking', 20),\n        })\n      })\n    )\n  },\n\n  hotel: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({\n          properties: generateMockApiResponse('hotel', 'property', 3),\n          rooms: generateMockApiResponse('hotel', 'room', 50),\n          reservations: generateMockApiResponse('hotel', 'reservation', 30),\n        })\n      })\n    )\n  },\n\n  gym: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({\n          facilities: generateMockApiResponse('gym', 'facility', 2),\n          members: generateMockApiResponse('gym', 'member', 100),\n          checkins: generateMockApiResponse('gym', 'checkin', 200),\n        })\n      })\n    )\n  },\n\n  retail: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({\n          stores: generateMockApiResponse('retail', 'store', 5),\n          products: generateMockApiResponse('retail', 'product', 500),\n          sales: generateMockApiResponse('retail', 'sale', 1000),\n        })\n      })\n    )\n  },\n\n  b2b: (endpoint: string) => {\n    server.use(\n      http.get(`${API_BASE_URL}${endpoint}`, () => {\n        return HttpResponse.json({\n          clients: generateMockApiResponse('b2b', 'client', 25),\n          projects: generateMockApiResponse('b2b', 'project', 50),\n          reports: generateMockApiResponse('b2b', 'report', 100),\n        })\n      })\n    )\n  },\n}"],"names":["mockApiEndpoint","mockIndustryData","server","API_BASE_URL","handlers","http","post","request","body","json","email","password","HttpResponse","access_token","token_type","expires_in","user","id","name","role","organization_id","is_active","organization","industry","subscription","features","status","detail","message","get","authHeader","headers","startsWith","permissions","created_at","updated_at","limits","users","api_calls","storage","settings","timezone","currency","date_format","url","URL","searchParams","mockData","generateMockApiResponse","data","meta","total","length","page","per_page","timeframe","metrics","revenue","growth","market_share","competitor_count","trends","daily_revenue","date","value","flags","enabled","rollout","String","Date","now","error","retry_after","Promise","resolve","setTimeout","console","warn","pathname","setupServer","success","endpoint","use","rateLimited","networkError","slow","delay","cinema","venues","movies","bookings","hotel","properties","rooms","reservations","gym","facilities","members","checkins","retail","stores","products","sales","b2b","clients","projects","reports"],"mappings":"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"}