1508e0d2920b079e32f21dd73223f17f
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return OrganizationSwitcher;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _react1 = require("@headlessui/react");
const _outline = require("@heroicons/react/24/outline");
const _OrganisationProvider = require("../providers/OrganisationProvider");
const _LoadingSpinner = /*#__PURE__*/ _interop_require_default(require("./LoadingSpinner"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const getIndustryIcon = (industry)=>{
    // Industry badge colors and icons
    switch(industry.toLowerCase()){
        case "cinema exhibition":
        case "cinema":
            return {
                color: "bg-purple-100 text-purple-800",
                icon: "\uD83C\uDFAC"
            };
        case "hotel":
        case "accommodation":
            return {
                color: "bg-blue-100 text-blue-800",
                icon: "\uD83C\uDFE8"
            };
        case "gym":
        case "fitness":
            return {
                color: "bg-green-100 text-green-800",
                icon: "\uD83D\uDCAA"
            };
        case "retail":
        case "retail trade":
            return {
                color: "bg-yellow-100 text-yellow-800",
                icon: "\uD83D\uDECD️"
            };
        case "b2b":
        case "business services":
            return {
                color: "bg-gray-100 text-gray-800",
                icon: "\uD83C\uDFE2"
            };
        default:
            return {
                color: "bg-gray-100 text-gray-800",
                icon: "\uD83C\uDFE2"
            };
    }
};
function OrganizationSwitcher({ className = "" }) {
    const { currentOrganisation, accessibleOrganisations, switchOrganisation, isSwitching, isLoadingAccessible } = (0, _OrganisationProvider.useOrganisationContext)();
    const [isOpen, setIsOpen] = (0, _react.useState)(false);
    const handleSwitchOrganisation = async (organisation)=>{
        if (organisation.id === currentOrganisation?.id || isSwitching) return;
        try {
            await switchOrganisation(organisation.id);
            setIsOpen(false);
        } catch (error) {
            console.error("Failed to switch organization:", error);
        // Error handling could show a toast notification here
        }
    };
    // Don't show if user has access to only one organization or none
    if (isLoadingAccessible || accessibleOrganisations.length <= 1) {
        return null;
    }
    const currentOrgDisplay = currentOrganisation || accessibleOrganisations[0];
    const currentIndustryStyle = getIndustryIcon(currentOrgDisplay?.industry || "");
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: `relative ${className}`,
        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_react1.Listbox, {
            value: currentOrganisation,
            onChange: handleSwitchOrganisation,
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "relative",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_react1.Listbox.Button, {
                        className: "relative w-full min-w-[200px] cursor-pointer rounded-lg bg-white py-2 pl-3 pr-10 text-left border border-gray-300 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 sm:text-sm",
                        disabled: isSwitching,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center gap-3",
                                children: [
                                    isSwitching ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_LoadingSpinner.default, {
                                        size: "sm"
                                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.BuildingOfficeIcon, {
                                        className: "h-5 w-5 text-gray-400"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "flex-1 min-w-0",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-2",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "block truncate font-medium text-gray-900",
                                                    children: currentOrgDisplay?.name || "Select Organization"
                                                }),
                                                currentOrgDisplay?.industry && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                    className: `inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${currentIndustryStyle.color}`,
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            children: currentIndustryStyle.icon
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "hidden sm:inline",
                                                            children: currentOrgDisplay.industry
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.ChevronDownIcon, {
                                    className: "h-5 w-5 text-gray-400",
                                    "aria-hidden": "true"
                                })
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_react1.Transition, {
                        show: isOpen,
                        as: _react.Fragment,
                        leave: "transition ease-in duration-100",
                        leaveFrom: "opacity-100",
                        leaveTo: "opacity-0",
                        beforeEnter: ()=>setIsOpen(true),
                        afterLeave: ()=>setIsOpen(false),
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_react1.Listbox.Options, {
                            className: "absolute z-50 mt-1 max-h-60 w-full min-w-[280px] overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "px-3 py-2 text-xs font-medium text-gray-500 border-b border-gray-200",
                                    children: "Switch Organization"
                                }),
                                accessibleOrganisations.map((organisation)=>{
                                    const industryStyle = getIndustryIcon(organisation.industry || "");
                                    const isCurrent = organisation.id === currentOrganisation?.id;
                                    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_react1.Listbox.Option, {
                                        className: ({ active, selected })=>`relative cursor-pointer select-none py-3 px-3 ${active || selected ? "bg-primary-50 text-primary-900" : "text-gray-900"} ${isCurrent ? "bg-primary-50" : ""}`,
                                        value: organisation,
                                        children: ({ selected })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                className: "flex items-center justify-between",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "flex items-center gap-3 flex-1 min-w-0",
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.BuildingOfficeIcon, {
                                                                className: "h-5 w-5 text-gray-400 flex-shrink-0"
                                                            }),
                                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                                className: "flex-1 min-w-0",
                                                                children: [
                                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                                        className: "flex items-center gap-2 mb-1",
                                                                        children: [
                                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                                className: `block truncate ${isCurrent ? "font-semibold" : "font-medium"}`,
                                                                                children: organisation.name
                                                                            }),
                                                                            isCurrent && /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                                className: "text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full",
                                                                                children: "Current"
                                                                            })
                                                                        ]
                                                                    }),
                                                                    organisation.industry && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                                        className: "flex items-center gap-2",
                                                                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                                            className: `inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${industryStyle.color}`,
                                                                            children: [
                                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                                    children: industryStyle.icon
                                                                                }),
                                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                                    children: organisation.industry
                                                                                })
                                                                            ]
                                                                        })
                                                                    })
                                                                ]
                                                            })
                                                        ]
                                                    }),
                                                    isCurrent && /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.CheckIcon, {
                                                        className: "h-5 w-5 text-primary-600"
                                                    })
                                                ]
                                            })
                                    }, organisation.id);
                                })
                            ]
                        })
                    })
                ]
            })
        })
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0L1NpdGVzL01hcmtldEVkZ2UvcGxhdGZvcm0td3JhcHBlci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy91aS9Pcmdhbml6YXRpb25Td2l0Y2hlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IEZyYWdtZW50LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgTGlzdGJveCwgVHJhbnNpdGlvbiB9IGZyb20gJ0BoZWFkbGVzc3VpL3JlYWN0J1xuaW1wb3J0IHtcbiAgQnVpbGRpbmdPZmZpY2VJY29uLFxuICBDaGV2cm9uRG93bkljb24sXG4gIENoZWNrSWNvbixcbn0gZnJvbSAnQGhlcm9pY29ucy9yZWFjdC8yNC9vdXRsaW5lJ1xuaW1wb3J0IHsgdXNlT3JnYW5pc2F0aW9uQ29udGV4dCB9IGZyb20gJ0AvY29tcG9uZW50cy9wcm92aWRlcnMvT3JnYW5pc2F0aW9uUHJvdmlkZXInXG5pbXBvcnQgeyBPcmdhbmlzYXRpb24gfSBmcm9tICdAL3R5cGVzL2FwaSdcbmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICdAL2NvbXBvbmVudHMvdWkvTG9hZGluZ1NwaW5uZXInXG5cbmNvbnN0IGdldEluZHVzdHJ5SWNvbiA9IChpbmR1c3RyeTogc3RyaW5nKSA9PiB7XG4gIC8vIEluZHVzdHJ5IGJhZGdlIGNvbG9ycyBhbmQgaWNvbnNcbiAgc3dpdGNoIChpbmR1c3RyeS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnY2luZW1hIGV4aGliaXRpb24nOlxuICAgIGNhc2UgJ2NpbmVtYSc6XG4gICAgICByZXR1cm4geyBjb2xvcjogJ2JnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtODAwJywgaWNvbjogJ/CfjqwnIH1cbiAgICBjYXNlICdob3RlbCc6XG4gICAgY2FzZSAnYWNjb21tb2RhdGlvbic6XG4gICAgICByZXR1cm4geyBjb2xvcjogJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAnLCBpY29uOiAn8J+PqCcgfVxuICAgIGNhc2UgJ2d5bSc6XG4gICAgY2FzZSAnZml0bmVzcyc6XG4gICAgICByZXR1cm4geyBjb2xvcjogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsIGljb246ICfwn5KqJyB9XG4gICAgY2FzZSAncmV0YWlsJzpcbiAgICBjYXNlICdyZXRhaWwgdHJhZGUnOlxuICAgICAgcmV0dXJuIHsgY29sb3I6ICdiZy15ZWxsb3ctMTAwIHRleHQteWVsbG93LTgwMCcsIGljb246ICfwn5uN77iPJyB9XG4gICAgY2FzZSAnYjJiJzpcbiAgICBjYXNlICdidXNpbmVzcyBzZXJ2aWNlcyc6XG4gICAgICByZXR1cm4geyBjb2xvcjogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLCBpY29uOiAn8J+PoicgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4geyBjb2xvcjogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLCBpY29uOiAn8J+PoicgfVxuICB9XG59XG5cbmludGVyZmFjZSBPcmdhbml6YXRpb25Td2l0Y2hlclByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE9yZ2FuaXphdGlvblN3aXRjaGVyKHsgY2xhc3NOYW1lID0gJycgfTogT3JnYW5pemF0aW9uU3dpdGNoZXJQcm9wcykge1xuICBjb25zdCB7XG4gICAgY3VycmVudE9yZ2FuaXNhdGlvbixcbiAgICBhY2Nlc3NpYmxlT3JnYW5pc2F0aW9ucyxcbiAgICBzd2l0Y2hPcmdhbmlzYXRpb24sXG4gICAgaXNTd2l0Y2hpbmcsXG4gICAgaXNMb2FkaW5nQWNjZXNzaWJsZSxcbiAgfSA9IHVzZU9yZ2FuaXNhdGlvbkNvbnRleHQoKVxuXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBoYW5kbGVTd2l0Y2hPcmdhbmlzYXRpb24gPSBhc3luYyAob3JnYW5pc2F0aW9uOiBPcmdhbmlzYXRpb24pID0+IHtcbiAgICBpZiAob3JnYW5pc2F0aW9uLmlkID09PSBjdXJyZW50T3JnYW5pc2F0aW9uPy5pZCB8fCBpc1N3aXRjaGluZykgcmV0dXJuXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHN3aXRjaE9yZ2FuaXNhdGlvbihvcmdhbmlzYXRpb24uaWQpXG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzd2l0Y2ggb3JnYW5pemF0aW9uOicsIGVycm9yKVxuICAgICAgLy8gRXJyb3IgaGFuZGxpbmcgY291bGQgc2hvdyBhIHRvYXN0IG5vdGlmaWNhdGlvbiBoZXJlXG4gICAgfVxuICB9XG5cbiAgLy8gRG9uJ3Qgc2hvdyBpZiB1c2VyIGhhcyBhY2Nlc3MgdG8gb25seSBvbmUgb3JnYW5pemF0aW9uIG9yIG5vbmVcbiAgaWYgKGlzTG9hZGluZ0FjY2Vzc2libGUgfHwgYWNjZXNzaWJsZU9yZ2FuaXNhdGlvbnMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgY3VycmVudE9yZ0Rpc3BsYXkgPSBjdXJyZW50T3JnYW5pc2F0aW9uIHx8IGFjY2Vzc2libGVPcmdhbmlzYXRpb25zWzBdXG4gIGNvbnN0IGN1cnJlbnRJbmR1c3RyeVN0eWxlID0gZ2V0SW5kdXN0cnlJY29uKGN1cnJlbnRPcmdEaXNwbGF5Py5pbmR1c3RyeSB8fCAnJylcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcmVsYXRpdmUgJHtjbGFzc05hbWV9YH0+XG4gICAgICA8TGlzdGJveCB2YWx1ZT17Y3VycmVudE9yZ2FuaXNhdGlvbn0gb25DaGFuZ2U9e2hhbmRsZVN3aXRjaE9yZ2FuaXNhdGlvbn0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICA8TGlzdGJveC5CdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBtaW4tdy1bMjAwcHhdIGN1cnNvci1wb2ludGVyIHJvdW5kZWQtbGcgYmctd2hpdGUgcHktMiBwbC0zIHByLTEwIHRleHQtbGVmdCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSBmb2N1czpib3JkZXItcHJpbWFyeS01MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLXByaW1hcnktNTAwIHNtOnRleHQtc21cIlxuICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3dpdGNoaW5nfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAge2lzU3dpdGNoaW5nID8gKFxuICAgICAgICAgICAgICAgIDxMb2FkaW5nU3Bpbm5lciBzaXplPVwic21cIiAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxCdWlsZGluZ09mZmljZUljb24gY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LWdyYXktNDAwXCIgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJibG9jayB0cnVuY2F0ZSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICAgIHtjdXJyZW50T3JnRGlzcGxheT8ubmFtZSB8fCAnU2VsZWN0IE9yZ2FuaXphdGlvbid9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7Y3VycmVudE9yZ0Rpc3BsYXk/LmluZHVzdHJ5ICYmIChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0gJHtjdXJyZW50SW5kdXN0cnlTdHlsZS5jb2xvcn1gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2N1cnJlbnRJbmR1c3RyeVN0eWxlLmljb259PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhpZGRlbiBzbTppbmxpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50T3JnRGlzcGxheS5pbmR1c3RyeX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInBvaW50ZXItZXZlbnRzLW5vbmUgYWJzb2x1dGUgaW5zZXQteS0wIHJpZ2h0LTAgZmxleCBpdGVtcy1jZW50ZXIgcHItMlwiPlxuICAgICAgICAgICAgICA8Q2hldnJvbkRvd25JY29uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LWdyYXktNDAwXCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvTGlzdGJveC5CdXR0b24+XG4gICAgICAgICAgXG4gICAgICAgICAgPFRyYW5zaXRpb25cbiAgICAgICAgICAgIHNob3c9e2lzT3Blbn1cbiAgICAgICAgICAgIGFzPXtGcmFnbWVudH1cbiAgICAgICAgICAgIGxlYXZlPVwidHJhbnNpdGlvbiBlYXNlLWluIGR1cmF0aW9uLTEwMFwiXG4gICAgICAgICAgICBsZWF2ZUZyb209XCJvcGFjaXR5LTEwMFwiXG4gICAgICAgICAgICBsZWF2ZVRvPVwib3BhY2l0eS0wXCJcbiAgICAgICAgICAgIGJlZm9yZUVudGVyPXsoKSA9PiBzZXRJc09wZW4odHJ1ZSl9XG4gICAgICAgICAgICBhZnRlckxlYXZlPXsoKSA9PiBzZXRJc09wZW4oZmFsc2UpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxMaXN0Ym94Lk9wdGlvbnMgY2xhc3NOYW1lPVwiYWJzb2x1dGUgei01MCBtdC0xIG1heC1oLTYwIHctZnVsbCBtaW4tdy1bMjgwcHhdIG92ZXJmbG93LWF1dG8gcm91bmRlZC1tZCBiZy13aGl0ZSBweS0xIHRleHQtYmFzZSBzaGFkb3ctbGcgcmluZy0xIHJpbmctYmxhY2sgcmluZy1vcGFjaXR5LTUgZm9jdXM6b3V0bGluZS1ub25lIHNtOnRleHQtc21cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0zIHB5LTIgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICAgIFN3aXRjaCBPcmdhbml6YXRpb25cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7YWNjZXNzaWJsZU9yZ2FuaXNhdGlvbnMubWFwKChvcmdhbmlzYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmR1c3RyeVN0eWxlID0gZ2V0SW5kdXN0cnlJY29uKG9yZ2FuaXNhdGlvbi5pbmR1c3RyeSB8fCAnJylcbiAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnQgPSBvcmdhbmlzYXRpb24uaWQgPT09IGN1cnJlbnRPcmdhbmlzYXRpb24/LmlkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxMaXN0Ym94Lk9wdGlvblxuICAgICAgICAgICAgICAgICAgICBrZXk9e29yZ2FuaXNhdGlvbi5pZH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsoeyBhY3RpdmUsIHNlbGVjdGVkIH0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgYHJlbGF0aXZlIGN1cnNvci1wb2ludGVyIHNlbGVjdC1ub25lIHB5LTMgcHgtMyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlIHx8IHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXByaW1hcnktNTAgdGV4dC1wcmltYXJ5LTkwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAndGV4dC1ncmF5LTkwMCdcbiAgICAgICAgICAgICAgICAgICAgICB9ICR7aXNDdXJyZW50ID8gJ2JnLXByaW1hcnktNTAnIDogJyd9YFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcmdhbmlzYXRpb259XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsoeyBzZWxlY3RlZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1aWxkaW5nT2ZmaWNlSWNvbiBjbGFzc05hbWU9XCJoLTUgdy01IHRleHQtZ3JheS00MDAgZmxleC1zaHJpbmstMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2BibG9jayB0cnVuY2F0ZSAke2lzQ3VycmVudCA/ICdmb250LXNlbWlib2xkJyA6ICdmb250LW1lZGl1bSd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmdhbmlzYXRpb24ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0N1cnJlbnQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGJnLXByaW1hcnktMTAwIHRleHQtcHJpbWFyeS03MDAgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VycmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmdhbmlzYXRpb24uaW5kdXN0cnkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgdGV4dC14cyBmb250LW1lZGl1bSAke2luZHVzdHJ5U3R5bGUuY29sb3J9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntpbmR1c3RyeVN0eWxlLmljb259PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntvcmdhbmlzYXRpb24uaW5kdXN0cnl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNDdXJyZW50ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrSWNvbiBjbGFzc05hbWU9XCJoLTUgdy01IHRleHQtcHJpbWFyeS02MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvTGlzdGJveC5PcHRpb24+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvTGlzdGJveC5PcHRpb25zPlxuICAgICAgICAgIDwvVHJhbnNpdGlvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0xpc3Rib3g+XG4gICAgPC9kaXY+XG4gIClcbn0iXSwibmFtZXMiOlsiT3JnYW5pemF0aW9uU3dpdGNoZXIiLCJnZXRJbmR1c3RyeUljb24iLCJpbmR1c3RyeSIsInRvTG93ZXJDYXNlIiwiY29sb3IiLCJpY29uIiwiY2xhc3NOYW1lIiwiY3VycmVudE9yZ2FuaXNhdGlvbiIsImFjY2Vzc2libGVPcmdhbmlzYXRpb25zIiwic3dpdGNoT3JnYW5pc2F0aW9uIiwiaXNTd2l0Y2hpbmciLCJpc0xvYWRpbmdBY2Nlc3NpYmxlIiwidXNlT3JnYW5pc2F0aW9uQ29udGV4dCIsImlzT3BlbiIsInNldElzT3BlbiIsInVzZVN0YXRlIiwiaGFuZGxlU3dpdGNoT3JnYW5pc2F0aW9uIiwib3JnYW5pc2F0aW9uIiwiaWQiLCJlcnJvciIsImNvbnNvbGUiLCJsZW5ndGgiLCJjdXJyZW50T3JnRGlzcGxheSIsImN1cnJlbnRJbmR1c3RyeVN0eWxlIiwiZGl2IiwiTGlzdGJveCIsInZhbHVlIiwib25DaGFuZ2UiLCJCdXR0b24iLCJkaXNhYmxlZCIsIkxvYWRpbmdTcGlubmVyIiwic2l6ZSIsIkJ1aWxkaW5nT2ZmaWNlSWNvbiIsInNwYW4iLCJuYW1lIiwiQ2hldnJvbkRvd25JY29uIiwiYXJpYS1oaWRkZW4iLCJUcmFuc2l0aW9uIiwic2hvdyIsImFzIiwiRnJhZ21lbnQiLCJsZWF2ZSIsImxlYXZlRnJvbSIsImxlYXZlVG8iLCJiZWZvcmVFbnRlciIsImFmdGVyTGVhdmUiLCJPcHRpb25zIiwibWFwIiwiaW5kdXN0cnlTdHlsZSIsImlzQ3VycmVudCIsIk9wdGlvbiIsImFjdGl2ZSIsInNlbGVjdGVkIiwiQ2hlY2tJY29uIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBd0NBOzs7ZUFBd0JBOzs7O3VCQXRDVzt3QkFDQzt5QkFLN0I7c0NBQ2dDO3VFQUVaOzs7Ozs7QUFFM0IsTUFBTUMsa0JBQWtCLENBQUNDO0lBQ3ZCLGtDQUFrQztJQUNsQyxPQUFRQSxTQUFTQyxXQUFXO1FBQzFCLEtBQUs7UUFDTCxLQUFLO1lBQ0gsT0FBTztnQkFBRUMsT0FBTztnQkFBaUNDLE1BQU07WUFBSztRQUM5RCxLQUFLO1FBQ0wsS0FBSztZQUNILE9BQU87Z0JBQUVELE9BQU87Z0JBQTZCQyxNQUFNO1lBQUs7UUFDMUQsS0FBSztRQUNMLEtB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