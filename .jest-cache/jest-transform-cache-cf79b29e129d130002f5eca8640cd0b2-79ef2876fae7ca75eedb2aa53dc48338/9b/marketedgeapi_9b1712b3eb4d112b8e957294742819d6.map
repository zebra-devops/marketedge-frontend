{"version":3,"sources":["/Users/matt/Sites/MarketEdge/platform-wrapper/frontend/src/services/market-edge-api.ts"],"sourcesContent":["import { \n  Market, \n  Competitor, \n  PricingData, \n  MarketAlert, \n  MarketOverview,\n  MarketMetrics,\n  CompetitorAnalysis,\n  CompetitorComparison,\n  MarketTrends,\n  MarketReport\n} from '@/types/market-edge';\nimport Cookies from 'js-cookie';\n\nconst API_BASE = 'http://localhost:8000/api/v1/market-edge';\n\nclass MarketEdgeAPI {\n  private async request<T>(\n    endpoint: string, \n    options: RequestInit = {}\n  ): Promise<T> {\n    const token = Cookies.get('access_token');\n    \n    // Debug logging\n    console.log('Market Edge API Request:', {\n      endpoint: `${API_BASE}${endpoint}`,\n      hasToken: !!token,\n      token: token ? `${token.substring(0, 20)}...` : 'No token'\n    });\n    \n    const response = await fetch(`${API_BASE}${endpoint}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token ? `Bearer ${token}` : '',\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ detail: 'Request failed' }));\n      throw new Error(error.detail || `HTTP ${response.status}`);\n    }\n\n    return response.json();\n  }\n\n  // Market endpoints\n  async getMarkets(): Promise<Market[]> {\n    return this.request<Market[]>('/markets');\n  }\n\n  async createMarket(marketData: {\n    name: string;\n    geographic_bounds?: Record<string, any>;\n    tracking_config?: Record<string, any>;\n  }): Promise<Market> {\n    return this.request<Market>('/markets', {\n      method: 'POST',\n      body: JSON.stringify(marketData),\n    });\n  }\n\n  async getMarket(marketId: string): Promise<Market> {\n    return this.request<Market>(`/markets/${marketId}`);\n  }\n\n  async updateMarket(\n    marketId: string, \n    marketData: {\n      name: string;\n      geographic_bounds?: Record<string, any>;\n      tracking_config?: Record<string, any>;\n    }\n  ): Promise<Market> {\n    return this.request<Market>(`/markets/${marketId}`, {\n      method: 'PUT',\n      body: JSON.stringify(marketData),\n    });\n  }\n\n  async deleteMarket(marketId: string): Promise<void> {\n    await this.request(`/markets/${marketId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Competitor endpoints\n  async getCompetitors(marketId: string): Promise<Competitor[]> {\n    return this.request<Competitor[]>(`/markets/${marketId}/competitors`);\n  }\n\n  async createCompetitor(competitorData: {\n    name: string;\n    market_id: string;\n    business_type?: string;\n    website?: string;\n    locations?: Record<string, any>;\n    tracking_priority?: number;\n    description?: string;\n    market_share_estimate?: number;\n  }): Promise<Competitor> {\n    return this.request<Competitor>('/competitors', {\n      method: 'POST',\n      body: JSON.stringify(competitorData),\n    });\n  }\n\n  async getCompetitor(competitorId: string): Promise<Competitor> {\n    return this.request<Competitor>(`/competitors/${competitorId}`);\n  }\n\n  async updateCompetitor(\n    competitorId: string,\n    competitorData: {\n      name: string;\n      market_id: string;\n      business_type?: string;\n      website?: string;\n      locations?: Record<string, any>;\n      tracking_priority?: number;\n      description?: string;\n      market_share_estimate?: number;\n    }\n  ): Promise<Competitor> {\n    return this.request<Competitor>(`/competitors/${competitorId}`, {\n      method: 'PUT',\n      body: JSON.stringify(competitorData),\n    });\n  }\n\n  // Pricing data endpoints\n  async createPricingData(pricingData: {\n    competitor_id: string;\n    product_service: string;\n    price_point: number;\n    currency?: string;\n    date_collected: string;\n    source?: string;\n    metadata?: Record<string, any>;\n    is_promotion?: boolean;\n    promotion_details?: string;\n  }): Promise<PricingData> {\n    return this.request<PricingData>('/pricing-data', {\n      method: 'POST',\n      body: JSON.stringify(pricingData),\n    });\n  }\n\n  async getMarketPricingData(\n    marketId: string,\n    options: {\n      competitor_id?: string;\n      product_service?: string;\n      limit?: number;\n    } = {}\n  ): Promise<PricingData[]> {\n    const params = new URLSearchParams();\n    if (options.competitor_id) params.append('competitor_id', options.competitor_id);\n    if (options.product_service) params.append('product_service', options.product_service);\n    if (options.limit) params.append('limit', options.limit.toString());\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<PricingData[]>(`/markets/${marketId}/pricing-data${query}`);\n  }\n\n  // Analysis endpoints\n  async getMarketOverview(marketId: string): Promise<MarketOverview> {\n    return this.request<MarketOverview>(`/markets/${marketId}/overview`);\n  }\n\n  async getMarketAnalysis(\n    marketId: string,\n    options: {\n      product_service?: string;\n      days_back?: number;\n    } = {}\n  ): Promise<MarketMetrics> {\n    const params = new URLSearchParams();\n    if (options.product_service) params.append('product_service', options.product_service);\n    if (options.days_back) params.append('days_back', options.days_back.toString());\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<MarketMetrics>(`/markets/${marketId}/analysis${query}`);\n  }\n\n  async getCompetitorAnalysis(\n    competitorId: string,\n    options: {\n      days_back?: number;\n    } = {}\n  ): Promise<CompetitorAnalysis> {\n    const params = new URLSearchParams();\n    if (options.days_back) params.append('days_back', options.days_back.toString());\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<CompetitorAnalysis>(`/competitors/${competitorId}/analysis${query}`);\n  }\n\n  async compareCompetitors(\n    marketId: string,\n    options: {\n      competitor_ids?: string[];\n      product_service?: string;\n    } = {}\n  ): Promise<CompetitorComparison> {\n    const params = new URLSearchParams();\n    if (options.competitor_ids) {\n      params.append('competitor_ids', options.competitor_ids.join(','));\n    }\n    if (options.product_service) params.append('product_service', options.product_service);\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<CompetitorComparison>(`/markets/${marketId}/comparison${query}`);\n  }\n\n  async getPricingTrends(\n    marketId: string,\n    options: {\n      competitor_id?: string;\n      product_service?: string;\n      days_back?: number;\n    } = {}\n  ): Promise<MarketTrends> {\n    const params = new URLSearchParams();\n    if (options.competitor_id) params.append('competitor_id', options.competitor_id);\n    if (options.product_service) params.append('product_service', options.product_service);\n    if (options.days_back) params.append('days_back', options.days_back.toString());\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<MarketTrends>(`/markets/${marketId}/trends${query}`);\n  }\n\n  // Alert endpoints\n  async getMarketAlerts(\n    marketId: string,\n    options: {\n      unread_only?: boolean;\n      limit?: number;\n    } = {}\n  ): Promise<MarketAlert[]> {\n    const params = new URLSearchParams();\n    if (options.unread_only) params.append('unread_only', 'true');\n    if (options.limit) params.append('limit', options.limit.toString());\n\n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.request<MarketAlert[]>(`/markets/${marketId}/alerts${query}`);\n  }\n\n  async markAlertRead(alertId: string): Promise<void> {\n    await this.request(`/alerts/${alertId}/mark-read`, {\n      method: 'POST',\n    });\n  }\n\n  // Report endpoints\n  async generateMarketReport(\n    marketId: string,\n    reportType: 'comprehensive' | 'summary' | 'trends' = 'comprehensive'\n  ): Promise<MarketReport> {\n    const params = new URLSearchParams();\n    params.append('report_type', reportType);\n\n    return this.request<MarketReport>(`/markets/${marketId}/report?${params.toString()}`);\n  }\n\n  // Utility methods\n  async searchMarkets(query: string): Promise<Market[]> {\n    const markets = await this.getMarkets();\n    return markets.filter(market => \n      market.name.toLowerCase().includes(query.toLowerCase())\n    );\n  }\n\n  async getMarketSummary(marketId: string) {\n    const [overview, alerts] = await Promise.all([\n      this.getMarketOverview(marketId),\n      this.getMarketAlerts(marketId, { unread_only: true, limit: 5 })\n    ]);\n\n    return {\n      ...overview,\n      unread_alerts: alerts\n    };\n  }\n\n  // Export functionality\n  async exportMarketData(\n    marketId: string,\n    format: 'csv' | 'pdf' = 'csv',\n    options: {\n      include_pricing?: boolean;\n      include_competitors?: boolean;\n      include_trends?: boolean;\n      date_range?: {\n        start: string;\n        end: string;\n      };\n    } = {}\n  ): Promise<Blob> {\n    // This would typically call a dedicated export endpoint\n    // For now, we'll generate the data client-side\n    const overview = await this.getMarketOverview(marketId);\n    \n    if (format === 'csv') {\n      return this.generateCSVExport(overview, options);\n    } else {\n      return this.generatePDFExport(overview, options);\n    }\n  }\n\n  private async generateCSVExport(\n    overview: MarketOverview, \n    options: any\n  ): Promise<Blob> {\n    let csvContent = 'Market Edge Export\\n\\n';\n    \n    // Market info\n    csvContent += `Market,${overview.market.name}\\n`;\n    csvContent += `Competitors,${overview.competitors.length}\\n`;\n    csvContent += `Data Points,${overview.recent_data_points}\\n\\n`;\n    \n    // Competitors\n    if (options.include_competitors !== false) {\n      csvContent += 'Competitor Name,Business Type,Market Share,Tracking Priority\\n';\n      overview.competitors.forEach(comp => {\n        csvContent += `${comp.name},${comp.business_type || ''},${comp.market_share_estimate || ''},${comp.tracking_priority}\\n`;\n      });\n    }\n    \n    return new Blob([csvContent], { type: 'text/csv' });\n  }\n\n  private async generatePDFExport(\n    overview: MarketOverview, \n    options: any\n  ): Promise<Blob> {\n    // This would use a PDF library like jsPDF\n    // For now, return a simple text blob\n    const content = `Market Edge Report - ${overview.market.name}`;\n    return new Blob([content], { type: 'application/pdf' });\n  }\n}\n\nexport const marketEdgeAPI = new MarketEdgeAPI();"],"names":["marketEdgeAPI","API_BASE","MarketEdgeAPI","request","endpoint","options","token","Cookies","get","console","log","hasToken","substring","response","fetch","headers","ok","error","json","catch","detail","Error","status","getMarkets","createMarket","marketData","method","body","JSON","stringify","getMarket","marketId","updateMarket","deleteMarket","getCompetitors","createCompetitor","competitorData","getCompetitor","competitorId","updateCompetitor","createPricingData","pricingData","getMarketPricingData","params","URLSearchParams","competitor_id","append","product_service","limit","toString","query","getMarketOverview","getMarketAnalysis","days_back","getCompetitorAnalysis","compareCompetitors","competitor_ids","join","getPricingTrends","getMarketAlerts","unread_only","markAlertRead","alertId","generateMarketReport","reportType","searchMarkets","markets","filter","market","name","toLowerCase","includes","getMarketSummary","overview","alerts","Promise","all","unread_alerts","exportMarketData","format","generateCSVExport","generatePDFExport","csvContent","competitors","length","recent_data_points","include_competitors","forEach","comp","business_type","market_share_estimate","tracking_priority","Blob","type","content"],"mappings":"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"}