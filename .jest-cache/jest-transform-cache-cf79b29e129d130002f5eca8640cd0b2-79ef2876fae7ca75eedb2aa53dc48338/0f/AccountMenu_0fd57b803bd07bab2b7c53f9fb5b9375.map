{"version":3,"names":["AccountMenu","className","cov_23r6mdzbm","b","f","isOpen","setIsOpen","s","_react","useState","user","logout","_useAuth","useAuthContext","menuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleLogout","isAdmin","role","_jsxruntime","jsxs","ref","onClick","jsx","_outline","UserCircleIcon","email","ChevronDownIcon","organisation","name","window","location","href","Cog6ToothIcon","ShieldCheckIcon","ArrowRightOnRectangleIcon"],"sources":["/Users/matt/Sites/MarketEdge/platform-wrapper/frontend/src/components/ui/AccountMenu.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport {\n  UserCircleIcon,\n  Cog6ToothIcon,\n  ShieldCheckIcon,\n  ArrowRightOnRectangleIcon,\n  ChevronDownIcon\n} from '@heroicons/react/24/outline';\nimport { useAuthContext } from '@/hooks/useAuth';\nimport { User } from '@/types/auth';\n\ninterface AccountMenuProps {\n  className?: string;\n}\n\nexport const AccountMenu: React.FC<AccountMenuProps> = ({ className = '' }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { user, logout } = useAuthContext();\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleLogout = () => {\n    logout();\n    setIsOpen(false);\n  };\n\n  // Check if user has admin role\n  const isAdmin = user?.role === 'admin';\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div className={`relative ${className}`} ref={menuRef}>\n      {/* Account Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n      >\n        <UserCircleIcon className=\"h-6 w-6\" />\n        <span className=\"hidden sm:block\">{user.email}</span>\n        <ChevronDownIcon className={`h-4 w-4 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50\">\n          <div className=\"py-1\">\n            {/* User Info Header */}\n            <div className=\"px-4 py-3 border-b border-gray-100\">\n              <p className=\"text-sm font-medium text-gray-900\">{user.email}</p>\n              <p className=\"text-xs text-gray-500 capitalize\">{user.role} â€¢ {user.organisation?.name || 'No Organisation'}</p>\n            </div>\n\n            {/* Settings */}\n            <button\n              onClick={() => {\n                // Navigate to settings page\n                window.location.href = '/settings';\n                setIsOpen(false);\n              }}\n              className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n            >\n              <Cog6ToothIcon className=\"h-4 w-4 mr-3\" />\n              Settings\n            </button>\n\n            {/* Admin Panel (only show if user is admin) */}\n            {isAdmin && (\n              <button\n                onClick={() => {\n                  // Navigate to dashboard page\n                  window.location.href = '/dashboard';\n                  setIsOpen(false);\n                }}\n                className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n              >\n                <ShieldCheckIcon className=\"h-4 w-4 mr-3\" />\n                Admin Panel\n              </button>\n            )}\n\n            {/* Divider */}\n            <div className=\"border-t border-gray-100 my-1\"></div>\n\n            {/* Logout */}\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50 hover:text-red-900\"\n            >\n              <ArrowRightOnRectangleIcon className=\"h-4 w-4 mr-3\" />\n              Sign Out\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}