ec6ade87f09cb0d1c7c5b03706b33229
"use strict";
// Mock Next.js router
jest.mock("next/router", ()=>({
        useRouter () {
            return {
                route: "/",
                pathname: "/",
                query: {},
                asPath: "/",
                push: jest.fn(),
                pop: jest.fn(),
                reload: jest.fn(),
                back: jest.fn(),
                prefetch: jest.fn().mockResolvedValue(undefined),
                beforePopState: jest.fn(),
                events: {
                    on: jest.fn(),
                    off: jest.fn(),
                    emit: jest.fn()
                },
                isFallback: false,
                isLocaleDomain: true,
                isReady: true,
                defaultLocale: "en",
                domainLocales: [],
                isPreview: false
            };
        }
    }));
// Mock Next.js navigation
jest.mock("next/navigation", ()=>({
        useRouter () {
            return {
                push: jest.fn(),
                replace: jest.fn(),
                refresh: jest.fn(),
                back: jest.fn(),
                forward: jest.fn(),
                prefetch: jest.fn()
            };
        },
        useSearchParams () {
            return {
                get: jest.fn()
            };
        },
        usePathname () {
            return "/";
        }
    }));
// Mock Next.js Image component
jest.mock("next/image", ()=>({
        __esModule: true,
        default: (props)=>{
            // eslint-disable-next-line @next/next/no-img-element
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                ...props
            });
        }
    }));
// Mock Next.js Link component
jest.mock("next/link", ()=>({
        __esModule: true,
        default: ({ children, href, ...props })=>{
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                href: href,
                ...props,
                children: children
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "server", {
    enumerable: true,
    get: function() {
        return server;
    }
});
const _jsxruntime = require("react/jsx-runtime");
require("@testing-library/jest-dom");
require("jest-axe/extend-expect");
require("./src/__tests__/mocks/server");
const _node = require("msw/node");
const _msw = require("msw");
// Mock ResizeObserver
global.ResizeObserver = jest.fn().mockImplementation(()=>({
        observe: jest.fn(),
        unobserve: jest.fn(),
        disconnect: jest.fn()
    }));
// Mock IntersectionObserver
global.IntersectionObserver = jest.fn().mockImplementation(()=>({
        observe: jest.fn(),
        unobserve: jest.fn(),
        disconnect: jest.fn()
    }));
// Mock window.matchMedia
Object.defineProperty(window, "matchMedia", {
    writable: true,
    value: jest.fn().mockImplementation((query)=>({
            matches: false,
            media: query,
            onchange: null,
            addListener: jest.fn(),
            removeListener: jest.fn(),
            addEventListener: jest.fn(),
            removeEventListener: jest.fn(),
            dispatchEvent: jest.fn()
        }))
});
// Mock window.scrollTo
Object.defineProperty(window, "scrollTo", {
    writable: true,
    value: jest.fn()
});
// Mock localStorage
Object.defineProperty(window, "localStorage", {
    value: {
        getItem: jest.fn(),
        setItem: jest.fn(),
        removeItem: jest.fn(),
        clear: jest.fn(),
        key: jest.fn(),
        length: 0
    },
    writable: true
});
// Mock sessionStorage
Object.defineProperty(window, "sessionStorage", {
    value: {
        getItem: jest.fn(),
        setItem: jest.fn(),
        removeItem: jest.fn(),
        clear: jest.fn(),
        key: jest.fn(),
        length: 0
    },
    writable: true
});
// Mock crypto for UUID generation
Object.defineProperty(global, "crypto", {
    value: {
        randomUUID: jest.fn(()=>"test-uuid-1234"),
        getRandomValues: jest.fn((arr)=>{
            for(let i = 0; i < arr.length; i++){
                arr[i] = Math.floor(Math.random() * 256);
            }
            return arr;
        })
    }
});
// Mock fetch if not available
if (!global.fetch) {
    global.fetch = jest.fn();
}
// Custom console override to catch errors during tests
const originalError = console.error;
const originalWarn = console.warn;
beforeAll(()=>{
    console.error = (...args)=>{
        if (typeof args[0] === "string" && (args[0].includes("Warning: ReactDOM.render is no longer supported") || args[0].includes("Warning: React.createFactory() is deprecated") || args[0].includes("Warning: componentWillReceiveProps") || args[0].includes("act(...)"))) {
            return;
        }
        originalError.call(console, ...args);
    };
    console.warn = (...args)=>{
        if (typeof args[0] === "string" && args[0].includes("componentWillReceiveProps")) {
            return;
        }
        originalWarn.call(console, ...args);
    };
});
afterAll(()=>{
    console.error = originalError;
    console.warn = originalWarn;
});
// Clean up after each test
afterEach(()=>{
    jest.clearAllMocks();
    // Reset localStorage and sessionStorage
    window.localStorage.clear();
    window.sessionStorage.clear();
});
// Global test utilities available in all tests
global.testUtils = {
    // Helper to create mock user with tenant context
    createMockUser: (overrides = {})=>({
            id: "test-user-id",
            email: "test@example.com",
            name: "Test User",
            role: "user",
            organisation_id: "test-tenant-id",
            is_active: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            ...overrides
        }),
    // Helper to create mock organisation
    createMockOrganisation: (overrides = {})=>({
            id: "test-tenant-id",
            name: "Test Organisation",
            industry: "general",
            subscription_plan: "professional",
            is_active: true,
            ...overrides
        }),
    // Helper to create mock API response
    createMockApiResponse: (data, status = 200)=>({
            ok: status >= 200 && status < 300,
            status,
            json: jest.fn().mockResolvedValue(data),
            text: jest.fn().mockResolvedValue(JSON.stringify(data))
        })
};
// Make fetch return successful responses by default
global.fetch.mockResolvedValue({
    ok: true,
    status: 200,
    json: jest.fn().mockResolvedValue({}),
    text: jest.fn().mockResolvedValue("")
});
const server = (0, _node.setupServer)(// Default handlers that can be overridden in individual tests
_msw.http.get("/api/v1/auth/me", ()=>{
    return _msw.HttpResponse.json(global.testUtils.createMockUser());
}), _msw.http.get("/api/v1/organisations", ()=>{
    return _msw.HttpResponse.json({
        organisations: [
            global.testUtils.createMockOrganisation()
        ]
    });
}), // Health check endpoint
_msw.http.get("/health", ()=>{
    return _msw.HttpResponse.json({
        status: "healthy"
    });
}));
// Start server before all tests
beforeAll(()=>server.listen({
        onUnhandledRequest: "warn"
    }));
// Reset handlers after each test to ensure test isolation
afterEach(()=>server.resetHandlers());
// Clean up after all tests
afterAll(()=>server.close());

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0L1NpdGVzL01hcmtldEVkZ2UvcGxhdGZvcm0td3JhcHBlci9mcm9udGVuZC9qZXN0LnNldHVwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSdcbmltcG9ydCAnamVzdC1heGUvZXh0ZW5kLWV4cGVjdCdcblxuLy8gSW1wb3J0IE1TVyBzZXJ2ZXIgZm9yIEFQSSBtb2NraW5nXG5pbXBvcnQgJy4vc3JjL19fdGVzdHNfXy9tb2Nrcy9zZXJ2ZXInXG5cbi8vIE1vY2sgTmV4dC5qcyByb3V0ZXJcbmplc3QubW9jaygnbmV4dC9yb3V0ZXInLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlOiAnLycsXG4gICAgICBwYXRobmFtZTogJy8nLFxuICAgICAgcXVlcnk6IHt9LFxuICAgICAgYXNQYXRoOiAnLycsXG4gICAgICBwdXNoOiBqZXN0LmZuKCksXG4gICAgICBwb3A6IGplc3QuZm4oKSxcbiAgICAgIHJlbG9hZDogamVzdC5mbigpLFxuICAgICAgYmFjazogamVzdC5mbigpLFxuICAgICAgcHJlZmV0Y2g6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxuICAgICAgYmVmb3JlUG9wU3RhdGU6IGplc3QuZm4oKSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBvbjogamVzdC5mbigpLFxuICAgICAgICBvZmY6IGplc3QuZm4oKSxcbiAgICAgICAgZW1pdDogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgaXNMb2NhbGVEb21haW46IHRydWUsXG4gICAgICBpc1JlYWR5OiB0cnVlLFxuICAgICAgZGVmYXVsdExvY2FsZTogJ2VuJyxcbiAgICAgIGRvbWFpbkxvY2FsZXM6IFtdLFxuICAgICAgaXNQcmV2aWV3OiBmYWxzZSxcbiAgICB9XG4gIH0sXG59KSlcblxuLy8gTW9jayBOZXh0LmpzIG5hdmlnYXRpb25cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwdXNoOiBqZXN0LmZuKCksXG4gICAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gICAgICByZWZyZXNoOiBqZXN0LmZuKCksXG4gICAgICBiYWNrOiBqZXN0LmZuKCksXG4gICAgICBmb3J3YXJkOiBqZXN0LmZuKCksXG4gICAgICBwcmVmZXRjaDogamVzdC5mbigpLFxuICAgIH1cbiAgfSxcbiAgdXNlU2VhcmNoUGFyYW1zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICB9XG4gIH0sXG4gIHVzZVBhdGhuYW1lKCkge1xuICAgIHJldHVybiAnLydcbiAgfSxcbn0pKVxuXG4vLyBNb2NrIE5leHQuanMgSW1hZ2UgY29tcG9uZW50XG5qZXN0Lm1vY2soJ25leHQvaW1hZ2UnLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiAocHJvcHMpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQG5leHQvbmV4dC9uby1pbWctZWxlbWVudFxuICAgIHJldHVybiA8aW1nIHsuLi5wcm9wc30gLz5cbiAgfSxcbn0pKVxuXG4vLyBNb2NrIE5leHQuanMgTGluayBjb21wb25lbnRcbmplc3QubW9jaygnbmV4dC9saW5rJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKHsgY2hpbGRyZW4sIGhyZWYsIC4uLnByb3BzIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGEgaHJlZj17aHJlZn0gey4uLnByb3BzfT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9hPlxuICAgIClcbiAgfSxcbn0pKVxuXG4vLyBNb2NrIFJlc2l6ZU9ic2VydmVyXG5nbG9iYWwuUmVzaXplT2JzZXJ2ZXIgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gIG9ic2VydmU6IGplc3QuZm4oKSxcbiAgdW5vYnNlcnZlOiBqZXN0LmZuKCksXG4gIGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcbn0pKVxuXG4vLyBNb2NrIEludGVyc2VjdGlvbk9ic2VydmVyXG5nbG9iYWwuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gIG9ic2VydmU6IGplc3QuZm4oKSxcbiAgdW5vYnNlcnZlOiBqZXN0LmZuKCksXG4gIGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcbn0pKVxuXG4vLyBNb2NrIHdpbmRvdy5tYXRjaE1lZGlhXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbWF0Y2hNZWRpYScsIHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIHZhbHVlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKHF1ZXJ5ID0+ICh7XG4gICAgbWF0Y2hlczogZmFsc2UsXG4gICAgbWVkaWE6IHF1ZXJ5LFxuICAgIG9uY2hhbmdlOiBudWxsLFxuICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksIC8vIGRlcHJlY2F0ZWRcbiAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLCAvLyBkZXByZWNhdGVkXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gIH0pKSxcbn0pXG5cbi8vIE1vY2sgd2luZG93LnNjcm9sbFRvXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnc2Nyb2xsVG8nLCB7XG4gIHdyaXRhYmxlOiB0cnVlLFxuICB2YWx1ZTogamVzdC5mbigpLFxufSlcblxuLy8gTW9jayBsb2NhbFN0b3JhZ2Vcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gIHZhbHVlOiB7XG4gICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgY2xlYXI6IGplc3QuZm4oKSxcbiAgICBrZXk6IGplc3QuZm4oKSxcbiAgICBsZW5ndGg6IDAsXG4gIH0sXG4gIHdyaXRhYmxlOiB0cnVlLFxufSlcblxuLy8gTW9jayBzZXNzaW9uU3RvcmFnZVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Nlc3Npb25TdG9yYWdlJywge1xuICB2YWx1ZToge1xuICAgIGdldEl0ZW06IGplc3QuZm4oKSxcbiAgICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gICAga2V5OiBqZXN0LmZuKCksXG4gICAgbGVuZ3RoOiAwLFxuICB9LFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pXG5cbi8vIE1vY2sgY3J5cHRvIGZvciBVVUlEIGdlbmVyYXRpb25cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdjcnlwdG8nLCB7XG4gIHZhbHVlOiB7XG4gICAgcmFuZG9tVVVJRDogamVzdC5mbigoKSA9PiAndGVzdC11dWlkLTEyMzQnKSxcbiAgICBnZXRSYW5kb21WYWx1ZXM6IGplc3QuZm4oKGFycikgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFyclxuICAgIH0pLFxuICB9LFxufSlcblxuLy8gTW9jayBmZXRjaCBpZiBub3QgYXZhaWxhYmxlXG5pZiAoIWdsb2JhbC5mZXRjaCkge1xuICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKClcbn1cblxuLy8gQ3VzdG9tIGNvbnNvbGUgb3ZlcnJpZGUgdG8gY2F0Y2ggZXJyb3JzIGR1cmluZyB0ZXN0c1xuY29uc3Qgb3JpZ2luYWxFcnJvciA9IGNvbnNvbGUuZXJyb3JcbmNvbnN0IG9yaWdpbmFsV2FybiA9IGNvbnNvbGUud2FyblxuXG5iZWZvcmVBbGwoKCkgPT4ge1xuICBjb25zb2xlLmVycm9yID0gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIChhcmdzWzBdLmluY2x1ZGVzKCdXYXJuaW5nOiBSZWFjdERPTS5yZW5kZXIgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCcpIHx8XG4gICAgICAgYXJnc1swXS5pbmNsdWRlcygnV2FybmluZzogUmVhY3QuY3JlYXRlRmFjdG9yeSgpIGlzIGRlcHJlY2F0ZWQnKSB8fFxuICAgICAgIGFyZ3NbMF0uaW5jbHVkZXMoJ1dhcm5pbmc6IGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnKSB8fFxuICAgICAgIGFyZ3NbMF0uaW5jbHVkZXMoJ2FjdCguLi4pJykpXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb3JpZ2luYWxFcnJvci5jYWxsKGNvbnNvbGUsIC4uLmFyZ3MpXG4gIH1cbiAgXG4gIGNvbnNvbGUud2FybiA9ICguLi5hcmdzKSA9PiB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnICYmXG4gICAgICBhcmdzWzBdLmluY2x1ZGVzKCdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJylcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBvcmlnaW5hbFdhcm4uY2FsbChjb25zb2xlLCAuLi5hcmdzKVxuICB9XG59KVxuXG5hZnRlckFsbCgoKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IgPSBvcmlnaW5hbEVycm9yXG4gIGNvbnNvbGUud2FybiA9IG9yaWdpbmFsV2FyblxufSlcblxuLy8gQ2xlYW4gdXAgYWZ0ZXIgZWFjaCB0ZXN0XG5hZnRlckVhY2goKCkgPT4ge1xuICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxuICAvLyBSZXNldCBsb2NhbFN0b3JhZ2UgYW5kIHNlc3Npb25TdG9yYWdlXG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2UuY2xlYXIoKVxuICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKVxufSlcblxuLy8gR2xvYmFsIHRlc3QgdXRpbGl0aWVzIGF2YWlsYWJsZSBpbiBhbGwgdGVzdHNcbmdsb2JhbC50ZXN0VXRpbHMgPSB7XG4gIC8vIEhlbHBlciB0byBjcmVhdGUgbW9jayB1c2VyIHdpdGggdGVuYW50IGNvbnRleHRcbiAgY3JlYXRlTW9ja1VzZXI6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ3Rlc3QtdXNlci1pZCcsXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICBuYW1lOiAnVGVzdCBVc2VyJyxcbiAgICByb2xlOiAndXNlcicsXG4gICAgb3JnYW5pc2F0aW9uX2lkOiAndGVzdC10ZW5hbnQtaWQnLFxuICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIC4uLm92ZXJyaWRlcyxcbiAgfSksXG4gIFxuICAvLyBIZWxwZXIgdG8gY3JlYXRlIG1vY2sgb3JnYW5pc2F0aW9uXG4gIGNyZWF0ZU1vY2tPcmdhbmlzYXRpb246IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ3Rlc3QtdGVuYW50LWlkJyxcbiAgICBuYW1lOiAnVGVzdCBPcmdhbmlzYXRpb24nLFxuICAgIGluZHVzdHJ5OiAnZ2VuZXJhbCcsXG4gICAgc3Vic2NyaXB0aW9uX3BsYW46ICdwcm9mZXNzaW9uYWwnLFxuICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAuLi5vdmVycmlkZXMsXG4gIH0pLFxuICBcbiAgLy8gSGVscGVyIHRvIGNyZWF0ZSBtb2NrIEFQSSByZXNwb25zZVxuICBjcmVhdGVNb2NrQXBpUmVzcG9uc2U6IChkYXRhLCBzdGF0dXMgPSAyMDApID0+ICh7XG4gICAgb2s6IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwLFxuICAgIHN0YXR1cyxcbiAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoZGF0YSksXG4gICAgdGV4dDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKEpTT04uc3RyaW5naWZ5KGRhdGEpKSxcbiAgfSksXG59XG5cbi8vIE1ha2UgZmV0Y2ggcmV0dXJuIHN1Y2Nlc3NmdWwgcmVzcG9uc2VzIGJ5IGRlZmF1bHRcbmdsb2JhbC5mZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gIG9rOiB0cnVlLFxuICBzdGF0dXM6IDIwMCxcbiAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgdGV4dDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCcnKSxcbn0pXG5cbi8vIFNldHVwIE1TVyAoTW9jayBTZXJ2aWNlIFdvcmtlcikgZm9yIEFQSSBtb2NraW5nIGluIHRlc3RzXG5pbXBvcnQgeyBzZXR1cFNlcnZlciB9IGZyb20gJ21zdy9ub2RlJ1xuaW1wb3J0IHsgaHR0cCwgSHR0cFJlc3BvbnNlIH0gZnJvbSAnbXN3J1xuXG4vLyBDcmVhdGUgTVNXIHNlcnZlciBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgYXZhaWxhYmxlIGluIGFsbCB0ZXN0c1xuZXhwb3J0IGNvbnN0IHNlcnZlciA9IHNldHVwU2VydmVyKFxuICAvLyBEZWZhdWx0IGhhbmRsZXJzIHRoYXQgY2FuIGJlIG92ZXJyaWRkZW4gaW4gaW5kaXZpZHVhbCB0ZXN0c1xuICBodHRwLmdldCgnL2FwaS92MS9hdXRoL21lJywgKCkgPT4ge1xuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihnbG9iYWwudGVzdFV0aWxzLmNyZWF0ZU1vY2tVc2VyKCkpXG4gIH0pLFxuICBcbiAgaHR0cC5nZXQoJy9hcGkvdjEvb3JnYW5pc2F0aW9ucycsICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oe1xuICAgICAgb3JnYW5pc2F0aW9uczogW2dsb2JhbC50ZXN0VXRpbHMuY3JlYXRlTW9ja09yZ2FuaXNhdGlvbigpXSxcbiAgICB9KVxuICB9KSxcbiAgXG4gIC8vIEhlYWx0aCBjaGVjayBlbmRwb2ludFxuICBodHRwLmdldCgnL2hlYWx0aCcsICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oeyBzdGF0dXM6ICdoZWFsdGh5JyB9KVxuICB9KSxcbilcblxuLy8gU3RhcnQgc2VydmVyIGJlZm9yZSBhbGwgdGVzdHNcbmJlZm9yZUFsbCgoKSA9PiBzZXJ2ZXIubGlzdGVuKHsgb25VbmhhbmRsZWRSZXF1ZXN0OiAnd2FybicgfSkpXG5cbi8vIFJlc2V0IGhhbmRsZXJzIGFmdGVyIGVhY2ggdGVzdCB0byBlbnN1cmUgdGVzdCBpc29sYXRpb25cbmFmdGVyRWFjaCgoKSA9PiBzZXJ2ZXIucmVzZXRIYW5kbGVycygpKVxuXG4vLyBDbGVhbiB1cCBhZnRlciBhbGwgdGVzdHNcbmFmdGVyQWxsKCgpID0+IHNlcnZlci5jbG9zZSgpKSJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsInJvdXRlIiwicGF0aG5hbWUiLCJxdWVyeSIsImFzUGF0aCIsInB1c2giLCJmbiIsInBvcCIsInJlbG9hZCIsImJhY2siLCJwcmVmZXRjaCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidW5kZWZpbmVkIiwiYmVmb3JlUG9wU3RhdGUiLCJldmVudHMiLCJvbiIsIm9mZiIsImVtaXQiLCJpc0ZhbGxiYWNrIiwiaXNMb2NhbGVEb21haW4iLCJpc1JlYWR5IiwiZGVmYXVsdExvY2FsZSIsImRvbWFpbkxvY2FsZXMiLCJpc1ByZXZpZXciLCJyZXBsYWNlIiwicmVmcmVzaCIsImZvcndhcmQiLCJ1c2VTZWFyY2hQYXJhbXMiLCJnZXQiLCJ1c2VQYXRobmFtZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicHJvcHMiLCJpbWciLCJjaGlsZHJlbiIsImhyZWYiLCJhIiwic2VydmVyIiwiZ2xvYmFsIiwiUmVzaXplT2JzZXJ2ZXIiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJvYnNlcnZlIiwidW5vYnNlcnZlIiwiZGlzY29ubmVjdCIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ3cml0YWJsZSIsInZhbHVlIiwibWF0Y2hlcyIsIm1lZGlhIiwib25jaGFuZ2UiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50IiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJrZXkiLCJsZW5ndGgiLCJyYW5kb21VVUlEIiwiZ2V0UmFuZG9tVmFsdWVzIiwiYXJyIiwiaSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImZldGNoIiwib3JpZ2luYWxFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsIm9yaWdpbmFsV2FybiIsIndhcm4iLCJiZWZvcmVBbGwiLCJhcmdzIiwiaW5jbHVkZXMiLCJjYWxsIiwiYWZ0ZXJBbGwiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwibG9jYWxTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJ0ZXN0VXRpbHMiLCJjcmVhdGVNb2NrVXNlciIsIm92ZXJyaWRlcyIsImlkIiwiZW1haWwiLCJuYW1lIiwicm9sZSIsIm9yZ2FuaXNhdGlvbl9pZCIsImlzX2FjdGl2ZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiY3JlYXRlTW9ja09yZ2FuaXNhdGlvbiIsImluZHVzdHJ5Iiwic3Vic2NyaXB0aW9uX3BsYW4iLCJjcmVhdGVNb2NrQXBpUmVzcG9uc2UiLCJkYXRhIiwic3RhdHVzIiwib2siLCJqc29uIiwidGV4dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXR1cFNlcnZlciIsImh0dHAiLCJIdHRwUmVzcG9uc2UiLCJvcmdhbmlzYXRpb25zIiwibGlzdGVuIiwib25VbmhhbmRsZWRSZXF1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