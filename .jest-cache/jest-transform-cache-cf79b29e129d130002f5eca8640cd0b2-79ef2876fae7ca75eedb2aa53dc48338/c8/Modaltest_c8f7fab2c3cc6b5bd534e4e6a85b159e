efb718c901e020d82bb8a3e4d5c0ac15
"use strict";
// Mock Headless UI components
jest.mock("@headlessui/react", ()=>({
        Dialog: {
            Root: ({ children, show })=>show ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "modal-root",
                    children: children
                }) : null,
            Panel: ({ children, className })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "modal-panel",
                    className: className,
                    children: children
                }),
            Title: ({ children, as: Component = "h3", className })=>/*#__PURE__*/ (0, _jsxruntime.jsx)(Component, {
                    "data-testid": "modal-title",
                    className: className,
                    children: children
                })
        },
        Transition: {
            Root: ({ children, show })=>show ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "transition-root",
                    children: children
                }) : null,
            Child: ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "transition-child",
                    children: children
                })
        }
    }));
// Mock Heroicons
jest.mock("@heroicons/react/24/outline", ()=>({
        XMarkIcon: ({ className })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                "data-testid": "close-icon",
                className: className,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                    d: "close-icon"
                })
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _testutils = require("../../../test-utils");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _Modal = /*#__PURE__*/ _interop_require_default(require("../Modal"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe("Modal Component", ()=>{
    const user = _userevent.default.setup();
    const defaultProps = {
        isOpen: true,
        onClose: jest.fn(),
        title: "Test Modal",
        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            children: "Modal content"
        })
    };
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it("renders when isOpen is true", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        expect(_testutils.screen.getByTestId("modal-root")).toBeInTheDocument();
        expect(_testutils.screen.getByTestId("modal-panel")).toBeInTheDocument();
        expect(_testutils.screen.getByTestId("modal-title")).toBeInTheDocument();
        expect(_testutils.screen.getByText("Test Modal")).toBeInTheDocument();
        expect(_testutils.screen.getByText("Modal content")).toBeInTheDocument();
    });
    it("does not render when isOpen is false", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            isOpen: false
        }));
        expect(_testutils.screen.queryByTestId("modal-root")).not.toBeInTheDocument();
        expect(_testutils.screen.queryByText("Test Modal")).not.toBeInTheDocument();
        expect(_testutils.screen.queryByText("Modal content")).not.toBeInTheDocument();
    });
    it("renders with default medium maxWidth", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const panel = _testutils.screen.getByTestId("modal-panel");
        expect(panel).toHaveClass("max-w-md");
    });
    it("renders with different maxWidth sizes", ()=>{
        const sizes = [
            "sm",
            "md",
            "lg",
            "xl",
            "2xl"
        ];
        sizes.forEach((size)=>{
            const { unmount } = (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
                ...defaultProps,
                maxWidth: size
            }));
            const panel = _testutils.screen.getByTestId("modal-panel");
            expect(panel).toHaveClass(`max-w-${size}`);
            unmount();
        });
    });
    it("calls onClose when close button is clicked", async ()=>{
        const onClose = jest.fn();
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            onClose: onClose
        }));
        const closeButton = _testutils.screen.getByRole("button");
        await user.click(closeButton);
        expect(onClose).toHaveBeenCalledTimes(1);
    });
    it("has proper accessibility attributes", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const closeButton = _testutils.screen.getByRole("button");
        expect(closeButton).toHaveAttribute("type", "button");
        // Screen reader text for close button
        expect(_testutils.screen.getByText("Close")).toBeInTheDocument();
        expect(_testutils.screen.getByText("Close")).toHaveClass("sr-only");
        const closeIcon = _testutils.screen.getByTestId("close-icon");
        expect(closeIcon).toHaveAttribute("aria-hidden", "true");
    });
    it("renders title as h3 element", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const title = _testutils.screen.getByTestId("modal-title");
        expect(title.tagName).toBe("H3");
        expect(title).toHaveClass("text-lg", "font-semibold", "leading-6", "text-gray-900", "mb-4");
    });
    it("renders custom children content", ()=>{
        const customContent = /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                    children: "Custom paragraph"
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                    children: "Custom button"
                })
            ]
        });
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            children: customContent
        }));
        expect(_testutils.screen.getByText("Custom paragraph")).toBeInTheDocument();
        expect(_testutils.screen.getByRole("button", {
            name: /custom button/i
        })).toBeInTheDocument();
    });
    it("has proper modal styling classes", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const panel = _testutils.screen.getByTestId("modal-panel");
        expect(panel).toHaveClass("relative", "transform", "overflow-hidden", "rounded-lg", "bg-white", "px-4", "pb-4", "pt-5", "text-left", "shadow-xl", "transition-all");
    });
    it("close button has proper styling", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const closeButton = _testutils.screen.getByRole("button");
        expect(closeButton).toHaveClass("rounded-md", "bg-white", "text-gray-400", "hover:text-gray-500", "focus:outline-none", "focus:ring-2", "focus:ring-indigo-500", "focus:ring-offset-2");
    });
    it("supports keyboard navigation", async ()=>{
        const onClose = jest.fn();
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            onClose: onClose
        }));
        const closeButton = _testutils.screen.getByRole("button");
        closeButton.focus();
        expect(closeButton).toHaveFocus();
        await user.keyboard("{Enter}");
        expect(onClose).toHaveBeenCalledTimes(1);
    });
    it("renders with proper responsive classes", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        const panel = _testutils.screen.getByTestId("modal-panel");
        expect(panel).toHaveClass("sm:my-8", "sm:w-full", "sm:p-6");
    });
    it("maintains focus management", ()=>{
        (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps
        }));
        // Modal should be focusable for screen readers
        const modal = _testutils.screen.getByTestId("modal-root");
        expect(modal).toBeInTheDocument();
    });
    it("handles dynamic title changes", ()=>{
        const { rerender } = (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            title: "Original Title"
        }));
        expect(_testutils.screen.getByText("Original Title")).toBeInTheDocument();
        rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            title: "Updated Title"
        }));
        expect(_testutils.screen.getByText("Updated Title")).toBeInTheDocument();
        expect(_testutils.screen.queryByText("Original Title")).not.toBeInTheDocument();
    });
    it("handles dynamic content changes", ()=>{
        const { rerender } = (0, _testutils.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Original Content"
            })
        }));
        expect(_testutils.screen.getByText("Original Content")).toBeInTheDocument();
        rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Modal.default, {
            ...defaultProps,
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Updated Content"
            })
        }));
        expect(_testutils.screen.getByText("Updated Content")).toBeInTheDocument();
        expect(_testutils.screen.queryByText("Original Content")).not.toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0L1NpdGVzL01hcmtldEVkZ2UvcGxhdGZvcm0td3JhcHBlci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy91aS9fX3Rlc3RzX18vTW9kYWwudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAL3Rlc3QtdXRpbHMnXG5pbXBvcnQgdXNlckV2ZW50IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvdXNlci1ldmVudCdcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9Nb2RhbCdcblxuLy8gTW9jayBIZWFkbGVzcyBVSSBjb21wb25lbnRzXG5qZXN0Lm1vY2soJ0BoZWFkbGVzc3VpL3JlYWN0JywgKCkgPT4gKHtcbiAgRGlhbG9nOiB7XG4gICAgUm9vdDogKHsgY2hpbGRyZW4sIHNob3cgfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlOyBzaG93OiBib29sZWFuIH0pID0+IFxuICAgICAgc2hvdyA/IDxkaXYgZGF0YS10ZXN0aWQ9XCJtb2RhbC1yb290XCI+e2NoaWxkcmVufTwvZGl2PiA6IG51bGwsXG4gICAgUGFuZWw6ICh7IGNoaWxkcmVuLCBjbGFzc05hbWUgfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlOyBjbGFzc05hbWU/OiBzdHJpbmcgfSkgPT4gXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwibW9kYWwtcGFuZWxcIiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+e2NoaWxkcmVufTwvZGl2PixcbiAgICBUaXRsZTogKHsgY2hpbGRyZW4sIGFzOiBDb21wb25lbnQgPSAnaDMnLCBjbGFzc05hbWUgfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlOyBhcz86IGtleW9mIEpTWC5JbnRyaW5zaWNFbGVtZW50czsgY2xhc3NOYW1lPzogc3RyaW5nIH0pID0+IFxuICAgICAgPENvbXBvbmVudCBkYXRhLXRlc3RpZD1cIm1vZGFsLXRpdGxlXCIgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntjaGlsZHJlbn08L0NvbXBvbmVudD4sXG4gIH0sXG4gIFRyYW5zaXRpb246IHtcbiAgICBSb290OiAoeyBjaGlsZHJlbiwgc2hvdyB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7IHNob3c6IGJvb2xlYW4gfSkgPT4gXG4gICAgICBzaG93ID8gPGRpdiBkYXRhLXRlc3RpZD1cInRyYW5zaXRpb24tcm9vdFwiPntjaGlsZHJlbn08L2Rpdj4gOiBudWxsLFxuICAgIENoaWxkOiAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT4gXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwidHJhbnNpdGlvbi1jaGlsZFwiPntjaGlsZHJlbn08L2Rpdj4sXG4gIH0sXG59KSlcblxuLy8gTW9jayBIZXJvaWNvbnNcbmplc3QubW9jaygnQGhlcm9pY29ucy9yZWFjdC8yNC9vdXRsaW5lJywgKCkgPT4gKHtcbiAgWE1hcmtJY29uOiAoeyBjbGFzc05hbWUgfTogeyBjbGFzc05hbWU/OiBzdHJpbmcgfSkgPT4gXG4gICAgPHN2ZyBkYXRhLXRlc3RpZD1cImNsb3NlLWljb25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICA8cGF0aCBkPVwiY2xvc2UtaWNvblwiIC8+XG4gICAgPC9zdmc+XG59KSlcblxuZGVzY3JpYmUoJ01vZGFsIENvbXBvbmVudCcsICgpID0+IHtcbiAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpXG5cbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgIGlzT3BlbjogdHJ1ZSxcbiAgICBvbkNsb3NlOiBqZXN0LmZuKCksXG4gICAgdGl0bGU6ICdUZXN0IE1vZGFsJyxcbiAgICBjaGlsZHJlbjogPGRpdj5Nb2RhbCBjb250ZW50PC9kaXY+LFxuICB9XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgfSlcblxuICBpdCgncmVuZGVycyB3aGVuIGlzT3BlbiBpcyB0cnVlJywgKCkgPT4ge1xuICAgIHJlbmRlcig8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gLz4pXG4gICAgXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcm9vdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcGFuZWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vZGFsLXRpdGxlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBNb2RhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ01vZGFsIGNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdkb2VzIG5vdCByZW5kZXIgd2hlbiBpc09wZW4gaXMgZmFsc2UnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSBpc09wZW49e2ZhbHNlfSAvPilcbiAgICBcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ21vZGFsLXJvb3QnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdUZXN0IE1vZGFsJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTW9kYWwgY29udGVudCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdyZW5kZXJzIHdpdGggZGVmYXVsdCBtZWRpdW0gbWF4V2lkdGgnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBjb25zdCBwYW5lbCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcGFuZWwnKVxuICAgIGV4cGVjdChwYW5lbCkudG9IYXZlQ2xhc3MoJ21heC13LW1kJylcbiAgfSlcblxuICBpdCgncmVuZGVycyB3aXRoIGRpZmZlcmVudCBtYXhXaWR0aCBzaXplcycsICgpID0+IHtcbiAgICBjb25zdCBzaXplcyA9IFsnc20nLCAnbWQnLCAnbGcnLCAneGwnLCAnMnhsJ10gYXMgY29uc3RcbiAgICBcbiAgICBzaXplcy5mb3JFYWNoKHNpemUgPT4ge1xuICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoPE1vZGFsIHsuLi5kZWZhdWx0UHJvcHN9IG1heFdpZHRoPXtzaXplfSAvPilcbiAgICAgIFxuICAgICAgY29uc3QgcGFuZWwgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vZGFsLXBhbmVsJylcbiAgICAgIGV4cGVjdChwYW5lbCkudG9IYXZlQ2xhc3MoYG1heC13LSR7c2l6ZX1gKVxuICAgICAgXG4gICAgICB1bm1vdW50KClcbiAgICB9KVxuICB9KVxuXG4gIGl0KCdjYWxscyBvbkNsb3NlIHdoZW4gY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgb25DbG9zZSA9IGplc3QuZm4oKVxuICAgIHJlbmRlcig8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gb25DbG9zZT17b25DbG9zZX0gLz4pXG4gICAgXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgIGF3YWl0IHVzZXIuY2xpY2soY2xvc2VCdXR0b24pXG4gICAgXG4gICAgZXhwZWN0KG9uQ2xvc2UpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKVxuICB9KVxuXG4gIGl0KCdoYXMgcHJvcGVyIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcycsICgpID0+IHtcbiAgICByZW5kZXIoPE1vZGFsIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICBleHBlY3QoY2xvc2VCdXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgIFxuICAgIC8vIFNjcmVlbiByZWFkZXIgdGV4dCBmb3IgY2xvc2UgYnV0dG9uXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Nsb3NlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ2xvc2UnKSkudG9IYXZlQ2xhc3MoJ3NyLW9ubHknKVxuICAgIFxuICAgIGNvbnN0IGNsb3NlSWNvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnY2xvc2UtaWNvbicpXG4gICAgZXhwZWN0KGNsb3NlSWNvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJylcbiAgfSlcblxuICBpdCgncmVuZGVycyB0aXRsZSBhcyBoMyBlbGVtZW50JywgKCkgPT4ge1xuICAgIHJlbmRlcig8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gLz4pXG4gICAgXG4gICAgY29uc3QgdGl0bGUgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vZGFsLXRpdGxlJylcbiAgICBleHBlY3QodGl0bGUudGFnTmFtZSkudG9CZSgnSDMnKVxuICAgIGV4cGVjdCh0aXRsZSkudG9IYXZlQ2xhc3MoJ3RleHQtbGcnLCAnZm9udC1zZW1pYm9sZCcsICdsZWFkaW5nLTYnLCAndGV4dC1ncmF5LTkwMCcsICdtYi00JylcbiAgfSlcblxuICBpdCgncmVuZGVycyBjdXN0b20gY2hpbGRyZW4gY29udGVudCcsICgpID0+IHtcbiAgICBjb25zdCBjdXN0b21Db250ZW50ID0gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPHA+Q3VzdG9tIHBhcmFncmFwaDwvcD5cbiAgICAgICAgPGJ1dHRvbj5DdXN0b20gYnV0dG9uPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gICAgXG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSBjaGlsZHJlbj17Y3VzdG9tQ29udGVudH0gLz4pXG4gICAgXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0N1c3RvbSBwYXJhZ3JhcGgnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jdXN0b20gYnV0dG9uL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBpdCgnaGFzIHByb3BlciBtb2RhbCBzdHlsaW5nIGNsYXNzZXMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBjb25zdCBwYW5lbCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcGFuZWwnKVxuICAgIGV4cGVjdChwYW5lbCkudG9IYXZlQ2xhc3MoXG4gICAgICAncmVsYXRpdmUnLFxuICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAnb3ZlcmZsb3ctaGlkZGVuJyxcbiAgICAgICdyb3VuZGVkLWxnJyxcbiAgICAgICdiZy13aGl0ZScsXG4gICAgICAncHgtNCcsXG4gICAgICAncGItNCcsXG4gICAgICAncHQtNScsXG4gICAgICAndGV4dC1sZWZ0JyxcbiAgICAgICdzaGFkb3cteGwnLFxuICAgICAgJ3RyYW5zaXRpb24tYWxsJ1xuICAgIClcbiAgfSlcblxuICBpdCgnY2xvc2UgYnV0dG9uIGhhcyBwcm9wZXIgc3R5bGluZycsICgpID0+IHtcbiAgICByZW5kZXIoPE1vZGFsIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICBleHBlY3QoY2xvc2VCdXR0b24pLnRvSGF2ZUNsYXNzKFxuICAgICAgJ3JvdW5kZWQtbWQnLFxuICAgICAgJ2JnLXdoaXRlJyxcbiAgICAgICd0ZXh0LWdyYXktNDAwJyxcbiAgICAgICdob3Zlcjp0ZXh0LWdyYXktNTAwJyxcbiAgICAgICdmb2N1czpvdXRsaW5lLW5vbmUnLFxuICAgICAgJ2ZvY3VzOnJpbmctMicsXG4gICAgICAnZm9jdXM6cmluZy1pbmRpZ28tNTAwJyxcbiAgICAgICdmb2N1czpyaW5nLW9mZnNldC0yJ1xuICAgIClcbiAgfSlcblxuICBpdCgnc3VwcG9ydHMga2V5Ym9hcmQgbmF2aWdhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBvbkNsb3NlID0gamVzdC5mbigpXG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSBvbkNsb3NlPXtvbkNsb3NlfSAvPilcbiAgICBcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgY2xvc2VCdXR0b24uZm9jdXMoKVxuICAgIGV4cGVjdChjbG9zZUJ1dHRvbikudG9IYXZlRm9jdXMoKVxuICAgIFxuICAgIGF3YWl0IHVzZXIua2V5Ym9hcmQoJ3tFbnRlcn0nKVxuICAgIGV4cGVjdChvbkNsb3NlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSlcbiAgfSlcblxuICBpdCgncmVuZGVycyB3aXRoIHByb3BlciByZXNwb25zaXZlIGNsYXNzZXMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBjb25zdCBwYW5lbCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcGFuZWwnKVxuICAgIGV4cGVjdChwYW5lbCkudG9IYXZlQ2xhc3MoJ3NtOm15LTgnLCAnc206dy1mdWxsJywgJ3NtOnAtNicpXG4gIH0pXG5cbiAgaXQoJ21haW50YWlucyBmb2N1cyBtYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIHJlbmRlcig8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gLz4pXG4gICAgXG4gICAgLy8gTW9kYWwgc2hvdWxkIGJlIGZvY3VzYWJsZSBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICBjb25zdCBtb2RhbCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9kYWwtcm9vdCcpXG4gICAgZXhwZWN0KG1vZGFsKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2hhbmRsZXMgZHluYW1pYyB0aXRsZSBjaGFuZ2VzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcig8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gdGl0bGU9XCJPcmlnaW5hbCBUaXRsZVwiIC8+KVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcmlnaW5hbCBUaXRsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgXG4gICAgcmVyZW5kZXIoPE1vZGFsIHsuLi5kZWZhdWx0UHJvcHN9IHRpdGxlPVwiVXBkYXRlZCBUaXRsZVwiIC8+KVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdVcGRhdGVkIFRpdGxlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdPcmlnaW5hbCBUaXRsZScpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdoYW5kbGVzIGR5bmFtaWMgY29udGVudCBjaGFuZ2VzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgIDxNb2RhbCB7Li4uZGVmYXVsdFByb3BzfSBjaGlsZHJlbj17PGRpdj5PcmlnaW5hbCBDb250ZW50PC9kaXY+fSAvPlxuICAgIClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT3JpZ2luYWwgQ29udGVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgXG4gICAgcmVyZW5kZXIoXG4gICAgICA8TW9kYWwgey4uLmRlZmF1bHRQcm9wc30gY2hpbGRyZW49ezxkaXY+VXBkYXRlZCBDb250ZW50PC9kaXY+fSAvPlxuICAgIClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVXBkYXRlZCBDb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdPcmlnaW5hbCBDb250ZW50JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG59KSJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkRpYWxvZyIsIlJvb3QiLCJjaGlsZHJlbiIsInNob3ciLCJkaXYiLCJkYXRhLXRlc3RpZCIsIlBhbmVsIiwiY2xhc3NOYW1lIiwiVGl0bGUiLCJhcyIsIkNvbXBvbmVudCIsIlRyYW5zaXRpb24iLCJDaGlsZCIsIlhNYXJrSWNvbiIsInN2ZyIsInBhdGgiLCJkIiwiZGVzY3JpYmUiLCJ1c2VyIiwidXNlckV2ZW50Iiwic2V0dXAiLCJkZWZhdWx0UHJvcHMiLCJpc09wZW4iLCJvbkNsb3NlIiwiZm4iLCJ0aXRsZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJyZW5kZXIiLCJNb2RhbCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwidG9CZUluVGhlRG9jdW1lbnQiLCJnZXRCeVRleHQiLCJxdWVyeUJ5VGVzdElkIiwibm90IiwicXVlcnlCeVRleHQiLCJwYW5lbCIsInRvSGF2ZUNsYXNzIiwic2l6ZXMiLCJmb3JFYWNoIiwic2l6ZSIsInVubW91bnQiLCJtYXhXaWR0aCIsImNsb3NlQnV0dG9uIiwiZ2V0QnlSb2xlIiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJjbG9zZUljb24iLCJ0YWdOYW1lIiwidG9CZSIsImN1c3RvbUNvbnRlbnQiLCJwIiwiYnV0dG9uIiwibmFtZSIsImZvY3VzIiwidG9IYXZlRm9jdXMiLCJrZXlib2FyZCIsIm1vZGFsIiwicmVyZW5kZXIiXSwibWFwcGluZ3MiOiI7QUFLQSw4QkFBOEI7QUFDOUJBLEtBQUtDLElBQUksQ0FBQyxxQkFBcUIsSUFBTyxDQUFBO1FBQ3BDQyxRQUFRO1lBQ05DLE1BQU0sQ0FBQyxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBZ0QsR0FDckVBLHFCQUFPLHFCQUFDQztvQkFBSUMsZUFBWTs4QkFBY0g7cUJBQWtCO1lBQzFESSxPQUFP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